# Instructions for maintainers

When there is a new PR, the maintainer should check the collaborator's changes from GitHub and accept them ONLY if the collaborator has followed the specifications available in the [CONTRIBUTING](CONTRIBUTING.md) file. If not, ask the collaborator to modify the contribution by adopting those specifications. You can leave comments in the PR and/or comment directly the code to highlight what should be changed.

> [!NOTE]
> All instructions for Git are provided as commands to be executed in the Terminal.

Before continuing, make sure:

1. You are working in the `main` branch: `git branch`.

2. Your `main` branch is updated: `git pull`.

3. Your local project library is synchronized with the `renv.lock` file: `renv::restore()` from the R console.

## Install required packages

1. Fetch the new branch in your computer. From the `main` branch run `git fetch`.

2. Move to the new branch: `git switch new-branch`.

3. From the R console, run `renv::install("new-pkg@version")` to install the required package. This command should be provided by the collaborator (see [Project library](CONTRIBUTING.md#project-library) in `CONTRIBUTING.md` file).

4. From the R console, run `renv::snapshot()` to record the new package in the `renv.lock` file.

5. Commit the `renv.lock` file: `git add renv.lock` and `git commit -m "Add new-package dependency"`.

## Add citations for the installed packages

1. Add the new package to `scripts/generate-pkg-citations.R`, source the file and check the newly generated citations. You can easily find them if you look at the output of `git diff`. Some packages have only the standard citation, others have both the standard and custom citation. Sometimes the citation in wrongly formatted. In this case, look at the function at the bottom of the script. There you will find examples to correct the wrongly formatted part of the citation.

2. Copy the citation key/s and paste them at the beginning of the vignette in the list of the used packages, and also wherever the package should be cited. You could use the search function and search for `[]` left by the collaborator (see [here](CONTRIBUTING.md#the-list-of-packages-at-the-beginning-of-the-vignette)).

3. Commit the script and the vignette with: `git commit -am "Add citations"`.

## Tune plots and images

Run the code chunk that creates the plot. The vignette is set to create the plotting device with the provided figure dimensions. For a plot generated by R commands, the dimensions are 6.5 x 4.5 inches.

If you need to change them, you can use the chunk options. For example, to set a different width, use `fig.width=5`. In other cases, if you want to plot multiple graphs together or change the margin, use the `par()` function. It is important to ensure that only the graphs that should appear in the same plot are created in the same chunk. If there are others, move them into a new chunk, as each chunk creates a new plotting device. This way, you do not need to reset the plotting parameters in each code chunk.

For the images, you need to change the `out.width` chunk option. By default, this is set to `100%`.

When you have finished editing, commit your changes.

## Merge PR

If the new code runs and you are happy with the graphs and figures in the vignette, you can merge the PR.

1. Push your changes with: `git push`

2. From the GitHub web interface, merge and close the PR

3. Back at your terminal console, move to the `main` branch: `git switch main`

4. Pull the changes from GitHub: `git pull`
